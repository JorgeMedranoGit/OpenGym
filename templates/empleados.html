{% extends "base.html" %}
{% block title %}Empleados{% endblock %}
{% block content %}
{% with messages = get_flashed_messages() %}
    {% if messages %}
        {% for msg in messages %}
            <p class="alert alert-info">{{ msg }}</p>
        {% endfor %}
    {% endif %}
{% endwith %}

<h3>Gestión de empleados</h3>

<div class="row">
    {% for empleado in empleados %}
        <div class="col-md-4">
            <div class="card custom-card mb-3">
                <div class="card-header">Empleado ID: {{ empleado.idempleado }}</div>
                <div class="card-body">
                    <h5 class="card-title">{{ empleado.nombre }} {{ empleado.apellido }}</h5>
                    <p><strong>Dirección:</strong> {{ empleado.direccion or 'No registrada' }}</p>
                    <p><strong>Carnet:</strong> {{ empleado.carnet }}</p>
                    <p><strong>Teléfono:</strong> {{ empleado.telefono or 'No registrado' }}</p>
                    <p><strong>Sueldo:</strong> {{ empleado.sueldo }} Bs.</p>
                    <div class="d-flex justify-content-between">
                        <a href="/empleados/editar/{{ empleado.idempleado }}" class="btn btn-dark">Editar</a>
                        <form action="/empleados/eliminar/{{ empleado.idempleado }}" method="post" style="display:inline;">
                            <button type="submit" class="btn btn-danger">Eliminar</button>
                        </form>
                        {% if empleado.idrol is not none %}
                            <a href="/empleados/actualizar_rol/{{ empleado.idempleado }}" class="btn btn-warning">Actualizar Rol</a>
                        {% else %}
                            <a href="/empleados/asignar_rol/{{ empleado.idempleado }}" class="btn btn-warning">Asignar Rol</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}
    {% if not empleados %}
        <p>No se encontraron empleados.</p>
    {% endif %}
</div>

<a href="/empleados/nuevo" class="btn btn-success mt-3">Añadir nuevo empleado</a>

{% endblock %}